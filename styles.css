/* Runbook Plugin - Notebook Cell Styles */

/* ==================== CELL CONTAINER ==================== */

.rb-cell {
	position: relative;
	border: 1px solid var(--background-modifier-border);
	border-radius: 8px;
	overflow: hidden;
	margin: 12px 0;
	background: var(--background-secondary);
}

/* ==================== RUN BUTTON (inside pre, next to native copy) ==================== */

/* Match native copy button styling from Obsidian */
.rb-run-button.clickable-icon {
	position: absolute;
	top: 0;
	/* Native copy is at right:0, our button goes to its left */
	/* Native: right:0 + margin:6px + width ~32px = occupies right 6-44px */
	right: 36px;
	margin: 6px;
	padding: 6px 8px;
	height: auto;
	background-color: transparent;
	box-shadow: none;
	color: var(--text-muted);
	font-size: var(--font-ui-smaller);
	border: 0;
	border-radius: var(--button-radius);
	cursor: pointer;
	display: none;
	z-index: 1;
}

.rb-run-button.clickable-icon:hover {
	color: var(--text-normal);
	background: var(--background-modifier-hover);
}

/* Show on pre hover (matching native copy button behavior) */
.rb-cell-code pre:hover .rb-run-button.clickable-icon {
	display: flex;
	align-items: center;
	justify-content: center;
}

/* Running state */
.rb-run-button.is-running {
	color: var(--text-accent);
	display: flex !important;
	align-items: center;
	justify-content: center;
}

.rb-run-button.is-running svg {
	animation: rb-spin 1s linear infinite;
}

@keyframes rb-spin {
	from { transform: rotate(0deg); }
	to { transform: rotate(360deg); }
}

/* Output area buttons - keep consistent styling */
.rb-cell-btn.clickable-icon {
	--icon-size: 16px;
	color: var(--text-muted);
	background: transparent;
	padding: 4px;
	border-radius: 4px;
	border: none;
	cursor: pointer;
}

.rb-cell-btn.clickable-icon:hover {
	color: var(--text-normal);
	background: var(--background-modifier-hover);
}

/* ==================== CODE AREA ==================== */

.rb-cell-code {
	background: var(--background-secondary-alt);
	border-bottom: 1px solid var(--background-modifier-border);
}

/* Reset pre styling inside cell */
.rb-cell-code pre {
	position: relative;
	margin: 0 !important;
	padding: 14px 12px !important;
	background: transparent !important;
	border: none !important;
	border-radius: 0 !important;
}

.rb-cell-code pre code {
	background: transparent !important;
}

/* ==================== OUTPUT AREA ==================== */

.rb-cell-output {
	position: relative;
	background: var(--background-secondary);
	padding: 10px 12px;
	min-height: 40px;
}

/* Empty state - more subtle */
.rb-cell-output.is-empty {
	opacity: 0.5;
}

.rb-cell-output.is-empty .rb-cell-output-body {
	display: none;
}

/* Error state */
.rb-cell-output.has-error .rb-cell-output-title {
	color: var(--text-error);
}

/* Output header */
.rb-cell-output-header {
	display: flex;
	justify-content: space-between;
	align-items: center;
	margin-bottom: 8px;
}

.rb-cell-output-title {
	font-size: 11px;
	font-weight: 500;
	color: var(--text-muted);
	text-transform: uppercase;
	letter-spacing: 0.5px;
}

/* Output action buttons */
.rb-cell-output-actions {
	display: flex;
	gap: 2px;
	opacity: 0;
	transition: opacity 120ms ease;
}

.rb-cell-output:hover .rb-cell-output-actions {
	opacity: 1;
}

/* Output body */
.rb-cell-output-body {
	font-family: var(--font-monospace);
	font-size: 13px;
	line-height: 1.5;
}

.rb-cell-output-body pre {
	margin: 0 !important;
	padding: 0 !important;
	background: transparent !important;
	border: none !important;
	white-space: pre-wrap;
	word-wrap: break-word;
	color: var(--text-normal);
	font-family: inherit;
	font-size: inherit;
	line-height: inherit;
}

/* Error output */
.rb-cell-output-body pre.rb-cell-error {
	color: var(--text-error);
}

/* Empty output message */
.rb-cell-output-empty {
	color: var(--text-faint);
	font-style: italic;
	font-size: 12px;
}

/* ==================== SPINNER ==================== */

.rb-cell-spinner {
	display: flex;
	justify-content: center;
	align-items: center;
	padding: 12px;
}

.rb-cell-spinner::after {
	content: "";
	width: 20px;
	height: 20px;
	border: 2px solid var(--background-modifier-border);
	border-top-color: var(--text-accent);
	border-radius: 50%;
	animation: rb-spin 0.8s linear infinite;
}
