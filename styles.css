/* Runbook Plugin Styles */

/* ==================== CSS CUSTOM PROPERTIES ==================== */
/* Design tokens for consistent theming and easier maintenance */

.theme-dark,
.theme-light {
	/* Spacing scale (4px base unit) */
	--rb-spacing-xs: 4px;
	--rb-spacing-sm: 8px;
	--rb-spacing-md: 12px;
	--rb-spacing-lg: 16px;
	--rb-spacing-xl: 20px;

	/* Typography */
	--rb-font-size-xs: 10px;
	--rb-font-size-sm: 11px;
	--rb-font-size-md: 12px;
	--rb-font-size-base: 13px;
	--rb-font-size-lg: 14px;
	--rb-line-height-normal: 1.5;

	/* Border radius */
	--rb-radius-sm: 2px;
	--rb-radius-md: 4px;
	--rb-radius-lg: 6px;

	/* Icon sizes */
	--rb-icon-sm: 14px;
	--rb-icon-md: 16px;
	--rb-icon-lg: 20px;
	--rb-icon-xl: 24px;

	/* Animation timing */
	--rb-duration-fast: 100ms;
	--rb-duration-normal: 200ms;
	--rb-duration-slow: 300ms;

	/* Z-index scale */
	--rb-z-base: 0;
	--rb-z-elevated: 10;
	--rb-z-dropdown: 50;

	/* Semantic colors (inherit from Obsidian) */
	--rb-color-success: var(--text-success, #0dbc79);
	--rb-color-warning: var(--text-warning, #e5e510);
	--rb-color-error: var(--text-error, #cd3131);
	--rb-color-info: var(--text-accent);
}

/* ==================== RUN BUTTON (top-right, next to native copy) ==================== */

.rb-run-button.clickable-icon {
	position: absolute;
	top: 0;
	right: 34px;
	margin: var(--rb-spacing-xs);
	padding: var(--rb-spacing-xs) 6px;
	height: auto;
	background-color: transparent;
	box-shadow: none;
	color: var(--text-muted);
	font-size: var(--font-ui-smaller);
	border: 0;
	border-radius: var(--button-radius);
	cursor: pointer;
	opacity: 0;
	z-index: var(--rb-z-elevated);
	transition: opacity var(--rb-duration-fast) ease-in-out;
}

.rb-run-button.clickable-icon:hover {
	color: var(--text-normal);
	background: var(--background-modifier-hover);
}

/* Show on pre hover */
pre:hover .rb-run-button.clickable-icon {
	opacity: 1;
}

/* Running state - always visible */
.rb-run-button.is-running {
	color: var(--text-accent);
	opacity: 1 !important;
}

.rb-run-button.is-running svg {
	animation: rb-spin 1s linear infinite;
}

@keyframes rb-spin {
	from { transform: rotate(0deg); }
	to { transform: rotate(360deg); }
}

/* Output area buttons - keep consistent styling */
.rb-cell-btn.clickable-icon {
	--icon-size: var(--rb-icon-md);
	color: var(--text-muted);
	background: transparent;
	padding: var(--rb-spacing-xs);
	border-radius: var(--rb-radius-md);
	border: none;
	cursor: pointer;
}

.rb-cell-btn.clickable-icon:hover {
	color: var(--text-normal);
	background: var(--background-modifier-hover);
}

/* ==================== CODE AREA ==================== */

.rb-cell-code {
	background: var(--background-secondary-alt);
	border-bottom: 1px solid var(--background-modifier-border);
}

/* Reset pre styling inside cell */
.rb-cell-code pre {
	position: relative;
	margin: 0 !important;
	padding: var(--rb-spacing-lg) var(--rb-spacing-md) !important;
	background: transparent !important;
	border: none !important;
	border-radius: 0 !important;
}

.rb-cell-code pre code {
	background: transparent !important;
}

/* ==================== OUTPUT AREA ==================== */

.rb-cell-output {
	position: relative;
	background: var(--background-secondary);
	padding: var(--rb-spacing-xs) var(--rb-spacing-md);
	min-height: 40px;
}

/* Empty state - more subtle */
.rb-cell-output.is-empty {
	opacity: 0.5;
}

.rb-cell-output.is-empty .rb-cell-output-body {
	display: none;
}

/* Error state */
.rb-cell-output.has-error .rb-cell-output-title {
	color: var(--text-error);
}

/* Output header */
.rb-cell-output-header {
	display: flex;
	justify-content: space-between;
	align-items: center;
	margin-bottom: var(--rb-spacing-sm);
}

.rb-cell-output-title {
	font-size: var(--rb-font-size-sm);
	font-weight: 500;
	color: var(--text-muted);
	text-transform: uppercase;
	letter-spacing: 0.5px;
}

/* Output action buttons */
.rb-cell-output-actions {
	display: flex;
	gap: 2px;
	opacity: 0;
	transition: opacity var(--rb-duration-normal) ease;
}

.rb-cell-output:hover .rb-cell-output-actions {
	opacity: 1;
}

/* Output body */
.rb-cell-output-body {
	font-family: var(--font-monospace);
	font-size: var(--rb-font-size-base);
	line-height: var(--rb-line-height-normal);
}

.rb-cell-output-body pre {
	margin: 0 !important;
	padding: 0 !important;
	background: transparent !important;
	border: none !important;
	white-space: pre-wrap;
	word-wrap: break-word;
	color: var(--text-normal);
	font-family: inherit;
	font-size: inherit;
	line-height: inherit;
}

/* Error output */
.rb-cell-output-body pre.rb-cell-error {
	color: var(--text-error);
}

/* Empty output message */
.rb-cell-output-empty {
	color: var(--text-faint);
	font-style: italic;
	font-size: var(--rb-font-size-md);
}

/* ==================== SPINNER ==================== */

.rb-cell-spinner {
	display: flex;
	justify-content: center;
	align-items: center;
	padding: var(--rb-spacing-md);
}

.rb-cell-spinner::after {
	content: "";
	width: var(--rb-icon-lg);
	height: var(--rb-icon-lg);
	border: 2px solid var(--background-modifier-border);
	border-top-color: var(--rb-color-info);
	border-radius: 50%;
	animation: rb-spin 0.8s linear infinite;
}
